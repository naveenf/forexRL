# Environment Configuration for Forex RL Trading System

environment:
  name: "MultiPairForexEnv"
  currency_pairs:
    - "EURUSD"
    - "AUDCHF"
    - "USDJPY"
  timeframe: "M15"

reward_function:
  # Tier 1: Exceptional trades
  primary_goal:
    profit_threshold: 37.50
    duration_max: 12
    bonus: 300.0

  excellent_trade:
    profit_threshold: 30.0
    duration_max: 10
    bonus: 200.0

  good_trade:
    profit_threshold: 22.50
    duration_max: 8
    bonus: 120.0

  # Tier 2: Profitable trades
  quick_profit:
    profit_threshold: 15.0
    duration_max: 6
    bonus: 60.0

  decent_profit:
    profit_threshold: 10.0
    base_bonus: 30.0
    multiplier: 0.5

  small_profit:
    profit_threshold: 5.0
    base_bonus: 15.0
    multiplier: 0.3

  # Tier 3-5: Losses (GRADUAL SCALING)
  loss_penalties:
    breakeven:
      base_reward: 5.0

    tiny_loss:
      threshold: -10.0
      base_reward: 2.0
      multiplier: -0.2

    small_loss:
      threshold: -20.0
      multiplier: -0.5

    normal_loss:
      threshold: -30.0
      multiplier: -1.0

    full_sl:
      threshold: -40.0
      multiplier: -1.5

    large_loss:
      threshold: -60.0
      multiplier: -2.0
      extra_penalty: 20.0

    catastrophic:
      multiplier: -2.5
      extra_penalty: 50.0

  # Activity rewards (OPTIMIZED FOR TREND FOLLOWING)
  activity:
    enabled: true
    base_trade_reward: 5.0               # Reduced from 10.0 (less trading encouraged)
    favorable_session_bonus: 5.0
    position_discipline_bonus: 10.0      # Increased from 2.0 (reward patience)
    overtrading_penalty_per_trade: 5.0   # Increased from 2.0
    overtrading_threshold: 3             # Reduced from 5 (stricter overtrading check)
    min_hold_duration: 8                 # FIX: Reduced from 12 to 8 candles (2 hours)
    optimal_hold_range: [10, 20]         # FIX: Wider window 10-20 candles (2.5-5 hours)

# Position management (UPDATED)
position_management:
  max_positions_per_pair: 1
  stop_loss_pips: 15.0
  take_profit_pips: 22.5
  max_position_duration: 24  # FIX: Max 6 hours (24 Ã— 15min) - synced with training.yaml
  min_position_duration: 8   # FIX: Reduced from 12 to 8 (2 hours min)

# Risk management (UPDATED)
risk_management:
  initial_balance: 10000.0  # FIX: Synced with training.yaml (was 1000.0)
  risk_per_trade_pct: 0.03
  commission_per_lot: 0.5   # FIX: Synced with training.yaml (was 1.0)
  dynamic_position_sizing: true

action_space:
  actions_per_pair: 3
  total_actions: 9

observation_space:
  window_size: 20
  indicators:
    - "rsi"
    - "sma_10"
    - "sma_20"
    - "ema_12"
    - "ema_26"
    - "atr"
    - "momentum"
    - "volatility"
